<!DOCTYPE html>
<html>
<head>
    <title>Тест основной страницы</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #status { padding: 10px; margin: 10px 0; border: 1px solid #ccc; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Тест загрузки основной страницы</h1>
    <div id="status">Проверка загрузки скриптов...</div>

    <script>
        function logStatus(message, isError = false) {
            const status = document.getElementById('status');
            status.innerHTML = message;
            status.className = isError ? 'error' : 'success';
            console.log(message);
        }

        // Проверка загрузки основных библиотек
        try {
            if(typeof PIXI === 'undefined') {
                throw new Error('PIXI не загружен');
            }
            if(typeof createjs === 'undefined') {
                throw new Error('createjs не загружен');
            }
            logStatus('Основные библиотеки загружены успешно');
        } catch (error) {
            logStatus('Ошибка загрузки библиотек: ' + error.message, true);
        }
    </script>

    <!-- Подключаем основные скрипты как в index.html -->
    <script src="js/lib/helpers.js"></script>
    <script src="js/lib/pegasus.js"></script>
    <script>var c_ = {};</script>
    <script src="js/lib/minpubsub.src.js"></script>
    <script src="js/lib/q.js"></script>
    <script src="js/lib/pixi.min.js"></script>
    <script src="js/lib/howler.js"></script>
    <script>var createjs = window;</script>
    <script src="js/lib/tweenjs-0.6.2.min.js"></script>
    <script>Ticker.framerate=60; Ticker.paused=true;</script>

    <!-- Проверка загрузки симуляции очереди -->
    <script>
        setTimeout(() => {
            try {
                if(typeof QueueSimulation === 'undefined') {
                    throw new Error('QueueSimulation не загружен');
                }
                if(typeof QueueUI === 'undefined') {
                    throw new Error('QueueUI не загружен');
                }
                logStatus('Симуляция очереди загружена успешно!');

                // Проверка создания экземпляра
                const sim = new QueueSimulation();
                logStatus('Экземпляр QueueSimulation создан успешно');

            } catch (error) {
                logStatus('Ошибка загрузки симуляции: ' + error.message, true);
            }
        }, 1000);
    </script>

    <script src="js/sims/QueueSimulation.js"></script>
    <script src="js/sims/QueueUI.js"></script>
</body>
</html>
